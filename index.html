<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>بوابة الأبراج - المستخدم</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="customModal" class="custom-modal" style="display: none;">
        <div class="modal-content">
            <p id="modalMsg"></p>
            <div class="modal-actions" id="modalActions"></div>
        </div>
    </div>

    <div id="login-section" class="main-container">
        <h2>أهلاً بك، أدخل كلمة سر (رمز) البرج</h2>
        <div class="form-group">
            <input type="password" id="enteredCode" placeholder="أدخل الرمز هنا...">
        </div>
        <button class="primary-btn" onclick="checkCode()">تسجيل الدخول</button>
        <p id="error-msg" class="error-msg"></p>
    </div>

    <div id="greeting-section" class="greeting-screen" style="display: none;">
        <div class="greeting-box">
            <h2 id="greeting-text" class="animate-text">هل أنت ... ؟</h2>
            <div class="action-btns">
                <button class="primary-btn" onclick="confirmIdentity()">نعم، متابعة</button>
                <button class="secondary-btn" onclick="cancelLogin()">لا، رجوع</button>
            </div>
        </div>
    </div>

    <div id="dashboard-section" class="main-container dashboard-container" style="display: none; padding-top: 30px;">
        <button class="primary-btn" onclick="toggleAddForm()" style="width: calc(100% - 60px); margin: 0 30px 20px 30px;">إضافة زبون</button>

        <div id="addCustomerSection" style="display: none; margin-bottom: 30px; border-bottom: 2px solid #ecf0f1; padding-bottom: 20px;">
            <h2>إضافة زبون جديد للبرج</h2>
            <div class="form-group"><input type="text" id="customerName" placeholder="اسم الزبون"></div>
            <div class="form-group"><input type="text" id="customerPhone" placeholder="رقم هاتف الزبون"></div>
            <div class="form-group"><input type="number" id="customerPrice" placeholder="مبلغ الاشتراك (مثال: 50000)"></div>
            <div class="form-group"><input type="date" id="startDate" placeholder="تاريخ البدء"></div>
            <div class="form-group"><input type="date" id="endDate" placeholder="تاريخ الانتهاء"></div>
            <button class="primary-btn" id="saveCustomerBtn" onclick="addCustomer()">حفظ بيانات الزبون</button>
            <button class="secondary-btn" onclick="toggleAddForm()" style="width: calc(100% - 60px); margin: 0 30px;">إلغاء</button>
        </div>

        <div class="dashboard-stats">
            <div class="stat-box">عدد المشتركين<br><span id="towerSubscribers">0</span></div>
            <div class="stat-box">الدين الكلي<br><span id="towerDebt">0</span></div>
        </div>
        
        <div class="tabs-header" style="margin: 20px 30px; border-radius: 8px; overflow: hidden; display: flex; background-color: #ecf0f1;">
            <button class="tab-btn active" onclick="switchCustomerTab('all')">جميع الزبائن</button>
            <button class="tab-btn" onclick="switchCustomerTab('expired')">المنتهي</button>
        </div>

        <div id="all-customers-tab" class="customer-tab-content active">
            <div id="customersList" class="customers-list"></div>
        </div>

        <div id="expired-customers-tab" class="customer-tab-content">
            <div id="expiredList" class="customers-list"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
